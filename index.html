<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terrain de Football avec Flèches</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap');

        body {
            font-family: 'Assistant', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f5f5f5;
        }

        .container {
            display: flex;
            justify-content: center;
            position: relative;
            gap: 10px;
        }

        .field {
            width: 700px;
            height: 500px;
            background: url('terrain.png') no-repeat center center;
            background-size: contain;
            position: relative;
            border: 2px solid #ccc;
        }

        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            position: absolute;
            left: -80px;
            top: 20px;
        }

        .arrow-tool {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            background: #fdfdfd;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .arrow-tool img {
            width: 50px;
            height: 50px;
        }

        .players {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 10px;
            width: 100%;
            max-width: 700px;
            padding: 10px;
            background: #fff;
            border: 1px solid #ccc;
        }

        .arrow {
            position: absolute;
            width: 2px;
            background: red;
            transform-origin: top left;
            z-index: 10; /* Les flèches droites restent au premier plan */
        }

        .curve-arrow {
            position: absolute;
            stroke: red;
            fill: none;
            stroke-width: 2;
            z-index: 10; /* Les flèches courbées restent au premier plan */
        }

        .selected {
            border: 2px solid #6fb98f;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="controls">
            <div class="arrow-tool" id="straight-arrow-tool">
                <img src="droite.jpg" alt="Flèche droite">
                <span>Flèche droite</span>
            </div>
            <div class="arrow-tool" id="curve-arrow-tool">
                <img src="courbe.jpg" alt="Flèche courbée">
                <span>Flèche courbée</span>
            </div>
        </div>
        <div class="field" id="field">
            <!-- Terrain de foot -->
        </div>
    </div>
    <div class="players" id="players">
        <!-- Liste des joueurs générée dynamiquement -->
    </div>

    <script>
        const field = document.getElementById('field');
        const straightArrowTool = document.getElementById('straight-arrow-tool');
        const curveArrowTool = document.getElementById('curve-arrow-tool');
        const playersContainer = document.getElementById('players');

        let isAddingStraightArrow = false;
        let isAddingCurveArrow = false;
        let startPoint = null;
        let controlPoint = null;

        // Activer le mode flèche droite
        straightArrowTool.addEventListener('click', () => {
            isAddingStraightArrow = !isAddingStraightArrow;
            isAddingCurveArrow = false;
            straightArrowTool.classList.toggle('selected', isAddingStraightArrow);
            curveArrowTool.classList.remove('selected');
            startPoint = null;
        });

        // Activer le mode flèche courbée
        curveArrowTool.addEventListener('click', () => {
            isAddingCurveArrow = !isAddingCurveArrow;
            isAddingStraightArrow = false;
            curveArrowTool.classList.toggle('selected', isAddingCurveArrow);
            straightArrowTool.classList.remove('selected');
            startPoint = null;
            controlPoint = null;
        });

        // Gérer les clics sur le terrain
        field.addEventListener('click', (e) => {
            const x = e.offsetX;
            const y = e.offsetY;

            if (isAddingStraightArrow) {
                if (!startPoint) {
                    // Définir le point de départ
                    startPoint = { x, y };
                } else {
                    // Définir le point d'arrivée et dessiner la flèche
                    drawStraightArrow(startPoint, { x, y });
                    startPoint = null;
                }
            } else if (isAddingCurveArrow) {
                if (!startPoint) {
                    // Définir le point de départ
                    startPoint = { x, y };
                } else if (!controlPoint) {
                    // Définir le point de contrôle (milieu)
                    controlPoint = { x, y };
                } else {
                    // Définir le point de fin et dessiner la flèche courbée
                    drawCurveArrow(startPoint, controlPoint, { x, y });
                    startPoint = null;
                    controlPoint = null;
                }
            }
        });

        // Fonction pour dessiner une flèche droite
        function drawStraightArrow(start, end) {
            const arrow = document.createElement('div');
            arrow.classList.add('arrow');

            const deltaX = end.x - start.x;
            const deltaY = end.y - start.y;
            const length = Math.sqrt(deltaX ** 2 + deltaY ** 2);
            const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);

            arrow.style.width = `${length}px`;
            arrow.style.transform = `rotate(${angle}deg)`;
            arrow.style.left = `${start.x}px`;
            arrow.style.top = `${start.y}px`;

            field.appendChild(arrow);
        }

        // Fonction pour dessiner une flèche courbée
        function drawCurveArrow(start, control, end) {
            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            const path = document.createElementNS(svgNS, "path");

            svg.style.position = "absolute";
            svg.style.left = "0";
            svg.style.top = "0";
            svg.style.width = "100%";
            svg.style.height = "100%";
            svg.style.overflow = "visible";
            svg.style.zIndex = "10"; // Flèche courbée toujours au premier plan

            path.setAttribute("d", `M ${start.x},${start.y} Q ${control.x},${control.y} ${end.x},${end.y}`);
            path.setAttribute("class", "curve-arrow");

            svg.appendChild(path);
            field.appendChild(svg);
        }

        // Générer une liste de joueurs fictifs (à compléter avec votre liste réelle)
        const players = ["Joueur 1", "Joueur 2", "Joueur 3", "Joueur 4", "Joueur 5", "Joueur 6", "Joueur 7", "Joueur 8"];

        players.forEach(player => {
            const playerDiv = document.createElement('div');
            playerDiv.classList.add('player');
            playerDiv.innerHTML = `<img src="joueur.png" alt="Joueur"><span>${player}</span>`;
            playersContainer.appendChild(playerDiv);
        });
    </script>
</body>
</html>
