<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terrain de Football</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap');

        body {
            font-family: 'Assistant', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f5f5f5;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .field {
            width: 700px;
            height: 500px;
            background: url('terrain.png') no-repeat center center;
            background-size: contain;
            position: relative;
            border: 2px solid #ccc;
        }

        .players {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 10px;
            width: 100%;
            max-width: 700px;
            padding: 10px;
            background: #fff;
            border: 1px solid #ccc;
        }

        .player {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            border: 1px solid #ccc;
            padding: 5px;
            border-radius: 5px;
            background: #fdfdfd;
        }

        .player img {
            width: 50px;
            height: 50px;
        }

        .player span {
            margin-top: 5px;
            font-size: 12px;
            text-align: center;
            font-weight: normal;
        }

        .player-on-field {
            position: absolute;
            z-index: 10;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .player-on-field img {
            width: 50px;
            height: 50px;
        }

        .player-on-field span {
            margin-top: 5px;
            font-size: 12px;
            color: white;
            font-weight: bold;
            text-align: center;
        }

        .player-on-field .close-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 20px;
            height: 20px;
            background: red;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
        }

        .curve-arrow {
            position: absolute;
            stroke: red;
            fill: none;
            stroke-width: 2;
            z-index: 20; /* Flèches courbées au premier plan */
        }

        .selected {
            border: 2px solid #6fb98f;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Terrain -->
        <div class="field" id="field">
            <!-- Les joueurs placés et flèches apparaîtront ici -->
        </div>

        <!-- Liste des joueurs -->
        <div class="players" id="players">
            <!-- Joueurs générés dynamiquement -->
        </div>
    </div>

    <script>
        const players = [
            "Aaron Esnard le Foll", "Aaron Kae", "Aboubakar Ait Kassou", "Adam Redissi",
            "Adil Lalaoui", "Amine Benboubker", "Assane Fadika", "Aurélien Achard",
            "Axel Aggar", "Bradley Woloko Lipeta", "Charle Mendes", "Elijah Banzulu",
            "Emmanuel Makkaya", "Erwann Pierre", "Ethan Henriet", "Ethan Tomas Espejo",
            "Farhan Soumanou", "Hosiya", "Ilyes Aissi", "Imed Hassan", "Imran Ben Yahia",
            "Isaac Sogo", "Junayd Bourezgui", "Kayis Amari", "Kiany Babelana Matondo",
            "Kyliane Kibuku", "Loucas Assabbane", "Lemiere Laiky", "Lenny Exumat",
            "Lenyh Delegove-Vally", "Liam Faria", "Manyl Boubrit", "Mathis Sidhoumi",
            "Mohamed Rakhaoui", "Naïl Mehdi", "Noham Ksia", "Rafael Esteves",
            "Raphaël You Khou", "Ryad Mayass", "Ryan Badawy", "Ryan Chaabi",
            "Said Hassan Akbas", "Habishan", "Kishan", "Soulayman Mhamdi",
            "Thaïs Ntone", "Théo Daigueperce", "Tiago Gendarme", "Tohiniaina Andritsizehena",
            "Valentin Cherel", "William Dambrun", "Yacine Touati", "Yani Bouchelkia", "Aylan Bouchelkia", "Yanis Mehdi"
        ];

        const playersContainer = document.getElementById('players');
        const field = document.getElementById('field');
        let selectedPlayer = null;
        let isAddingCurveArrow = false;
        let startPoint = null;
        let controlPoint = null;

        // Générer les joueurs
        players.forEach(player => {
            const playerDiv = document.createElement('div');
            playerDiv.classList.add('player');
            playerDiv.innerHTML = `
                <img src="joueur.png" alt="Joueur">
                <span>${player.split(" ")[0]} ${player.split(" ")[1]?.[0] || ''}.</span>
            `;
            playersContainer.appendChild(playerDiv);

            // Sélectionner un joueur dans la liste
            playerDiv.addEventListener('click', () => {
                if (selectedPlayer) {
                    selectedPlayer.classList.remove('selected');
                }
                selectedPlayer = playerDiv;
                playerDiv.classList.add('selected');
            });
        });

        // Gérer les clics sur le terrain
        field.addEventListener('click', (e) => {
            if (!selectedPlayer && !isAddingCurveArrow) {
                alert("Veuillez d'abord sélectionner un joueur ou activer le mode flèche courbée.");
                return;
            }

            if (isAddingCurveArrow) {
                if (!startPoint) {
                    startPoint = { x: e.offsetX, y: e.offsetY };
                } else if (!controlPoint) {
                    controlPoint = { x: e.offsetX, y: e.offsetY };
                } else {
                    drawCurveArrow(startPoint, controlPoint, { x: e.offsetX, y: e.offsetY });
                    startPoint = null;
                    controlPoint = null;
                }
                return;
            }

            // Ajouter un joueur
            const playerDiv = document.createElement('div');
            playerDiv.classList.add('player-on-field');
            playerDiv.innerHTML = `
                ${selectedPlayer.innerHTML}
                <button class="close-btn">&times;</button>
            `;
            playerDiv.style.left = `${e.offsetX}px`;
            playerDiv.style.top = `${e.offsetY}px`;

            field.appendChild(playerDiv);
            selectedPlayer.remove();
            selectedPlayer = null;

            // Ajouter l'événement pour la croix rouge
            playerDiv.querySelector('.close-btn').addEventListener('click', () => {
                playersContainer.appendChild(playerDiv);
                playerDiv.remove();
            });
        });

        // Dessiner une flèche courbée
        function drawCurveArrow(start, control, end) {
            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            const path = document.createElementNS(svgNS, "path");

            svg.style.position = "absolute";
            svg.style.left = "0";
            svg.style.top = "0";
            svg.style.width = "100%";
            svg.style.height = "100%";
            svg.style.overflow = "visible";
            svg.style.zIndex = "20";

            path.setAttribute("d", `M ${start.x},${start.y} Q ${control.x},${control.y} ${end.x},${end.y}`);
            path.setAttribute("class", "curve-arrow");

            svg.appendChild(path);
            field.appendChild(svg);
        }

        // Activer le mode flèche courbée
        document.addEventListener('keydown', (e) => {
            if (e.key === 'c') {
                isAddingCurveArrow = !isAddingCurveArrow;
                alert(`Mode flèche courbée ${isAddingCurveArrow ? 'activé' : 'désactivé'}.`);
            }
        });
    </script>
</body>
</html>
